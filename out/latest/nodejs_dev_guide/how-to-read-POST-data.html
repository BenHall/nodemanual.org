<!DOCTYPE html><!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>Node.js Manual | div class='title'&gt;</title><meta name="generator" content="c9-doc-build"><meta name="description" content="A collection of Node.js tutorials"><meta name="author" content="Garen J. Torikian"><meta name="viewport" content="width=device-width,initial-scale=1"><!-- CSS--><link rel="stylesheet" href="../resources/csses/bootstrap.css"><link rel="stylesheet" href="../resources/csses/prettify.css"><link rel="stylesheet" href="../resources/csses/refguide_overrides.css"><link rel="stylesheet" href="../resources/csses/devguide_overrides.css"><!-- end CSS--><script src="../resources/javascripts/jquery.js"></script><script src="../resources/javascripts/clicker.js"></script><script src="../resources/javascripts/jquery.collapse.js"></script><script src="../resources/javascripts/jquery.cookie.js"></script><script src="../resources/javascripts/bootstrap-dropdown.js"></script></head><body onload="styleCode()"><div class="topbar"><div class="fill"><div id="topSection" class="container"><ul class="nav"><li data-dropdown="dropdown" class="dropdown"><a href="/" class="dropdown-toggle brand"><!--div(class="arrow-down")--></a><ul class="dropdown-menu"><li><a href="http://www.nodebits.org/">Nodebits</a></li></ul></li></ul><ul class="nav"><li id="node_js_ref"><a href="../nodejs_ref_guide/index.html">Node.js Reference</a></li><li id="nodejs_dev_guide"><a href="../nodejs_dev_guide/index.html">Node.js Manual</a></li><li id="js_doc"><a href="../js_doc/index.html">Javascript Reference</a></li></ul><form id="searchbox" action="" class="pull-right"><input name="query" type="text" placeholder="Search Documentation" title="Search across all the documentation types" class="span3"></form></div></div></div><header id="overview" class="jumbotron masthead"><div class="inner"><div class="container"><h1>Node.js Manual</h1><p class="lead"></p></div></div></header><div class="container"><div class="content"><div class="row container"><div class="span5 offset4 sidebarContainer"><div id="sidebar"><div id="well"><h2>Node.js Manual</h2><h3>Basic Overview</h3><ul class="menu"><li><div class="menu-item"><a href="how-to-write-asynchronous-code.html" class="menuLink">Writing Asynchronous Code                                                        </a></div></li><li><div class="menu-item"><a href="what-are-callbacks.html" class="menuLink">Working with Callbacks</a></div></li><li><div class="menu-item"><a href="what-are-event-emitters.html" class="menuLink">Understanding Event Emitters</a></div></li><li><div class="menu-item"><a href="npm.html" class="menuLink">The Node Package Manager</a></div><ul class="menuTwo"><li><div class="menu-item"><a href="how-to-access-module-package-info.html" class="menuLink class">Accessing Module Package Info</a></div></li><li><div class="menu-item"><a href="what-is-node-core-verus-userland.html" class="menuLink class">Core Libraries versus User-Submitted Modules  </a></div></li><li><div class="menu-item"><a href="what-is-the-file-package-json.html" class="menuLink class">Parsing the File Package JSON    </a></div></li></ul></li><li><div class="menu-item"><a href="what-is-require.html" class="menuLink">Importing Modules with require()             </a></div></li><li><div class="menu-item"><a href="how-to-use-nodejs-repl.html" class="menuLink">Executing Command Line Node.js via REPL     </a></div></li></ul><h3>Tutorials</h3><ul class="menu"><li><div class="menu-item"><a href="how-to-log.html" class="menuLink">Implementing Logging Messages</a></div></li><li><div class="menu-item"><span class="menuHeader">The File System</span></div><ul class="menuTwo"><li><div class="menu-item"><a href="how-to-read-files-in-nodejs.html" class="menuLink">Reading Files            </a></div></li><li><div class="menu-item"><a href="how-to-write-files-in-nodejs.html" class="menuLink">Writing to Files   </a></div></li><li><div class="menu-item"><a href="how-to-use-the-path-module.html" class="menuLink">Manipulating Paths with the path Module</a></div></li><li><div class="menu-item"><a href="how-to-store-local-config-data.html" class="menuLink">Storing Local Configuration Data       </a></div></li><li><div class="menu-item"><a href="how-to-search-files-and-directories-in-nodejs.html" class="menuLink">Searching for Files               </a></div></li></ul></li><li><div class="menu-item"><a href="what-are-the-built-in-timer-functions.html" class="menuLink">Using Timer Functions Correctly</a></div></li><li><div class="menu-item"><span class="menuHeader">The Command Line</span></div><ul class="menuTwo"><li><div class="menu-item"><a href="how-to-prompt-for-command-line-input.html" class="menuLink">Prompting for Command Line Input             </a></div></li><li><div class="menu-item"><a href="how-to-parse-command-line-arguments.html" class="menuLink">Parsing Command Line Arguments  </a></div></li><li><div class="menu-item"><a href="how-to-get-colors-on-the-command-line.html" class="menuLink">Colors on the Command Line    </a></div></li></ul></li><li><div class="menu-item"><a href="security.html" class="menuLink">Securing Your Code  </a></div></li><li><div class="menu-item"><span class="menuHeader">HTTP Servers and Clients</span></div><ul class="menuTwo"><li><div class="menu-item"><a href="HTTP-servers.html" class="menuLink">Creating an HTTP Server</a></div></li><li><div class="menu-item"><a href="how-to-create-a-HTTPS-server.html" class="menuLink">Creating an HTTPS Server</a></div></li><li><div class="menu-item"><a href="how-to-serve-static-files.html" class="menuLink">Serving Static Files   </a></div></li><li><div class="menu-item"><a href="how-to-create-a-HTTP-request.html" class="menuLink">Creating HTTP GET and POST Requests                                 </a></div></li><li><div class="menu-item"><a href="how-to-read-POST-data.html" class="menuLink">Reading POST Data</a></div></li><li><div class="menu-item"><a href="how-to-handle-multipart-form-data.html" class="menuLink">Handling Multi-Part Form Data                               </a></div></li><li><div class="menu-item"><a href="how-to-access-query-string-parameters.html" class="menuLink">Accessing Query String Parameters  </a></div></li></ul></li><li><div class="menu-item"><span class="menuHeader">Debugging and Handling Errors</span></div><ul class="menuTwo"><li><div class="menu-item"><a href="how-to-debug-nodejs-applications.html" class="menuLink">Debugging Node.js Applications    </a></div></li><li><div class="menu-item"><a href="how-to-use-util-inspect.html" class="menuLink">Debugging with util.inspect() </a></div></li><li><div class="menu-item"><a href="what-is-try-catch.html" class="menuLink">Understanding try/catch                                  </a></div></li><li><div class="menu-item"><a href="what-is-the-error-object.html" class="menuLink">The Global Error Object</a></div></li><li><div class="menu-item"><a href="what-are-the-error-conventions.html" class="menuLink">Error Conventions</a></div></li></ul></li><li><div class="menu-item"><span class="menuHeader">Buffers and Streams</span></div><ul class="menuTwo"><li><div class="menu-item"><a href="how-to-use-buffers.html" class="menuLink">Manipulating Buffers   </a></div></li><li><div class="menu-item"><a href="streams.html" class="menuLink">Understanding Streams           </a></div></li><li><div class="menu-item"><a href="how-to-use-fs-create-read-stream.html" class="menuLink">Reading Streams   </a></div></li><li><div class="menu-item"><a href="how-to-use-fs-create-write-stream.html" class="menuLink">Writing to Streams</a></div></li><li><div class="menu-item"><a href="how-to-use-stream-pipe.html" class="menuLink">Piping Streams</a></div></li></ul></li><li><div class="menu-item"><a href="how-to-spawn-a-child-process.html" class="menuLink">Spawning Child Processes                  </a></div></li><li><div class="menu-item"><a href="how-to-create-a-custom-repl.html" class="menuLink">Creating a Custom REPL</a></div></li><li><div class="menu-item"><a href="cryptography.html" class="menuLink">Implementing Cryptography</a></div><ul class="menuTwo"><li><div class="menu-item"><a href="how-to-use-crypto-module.html" class="menuLink">Using the crypto Module    </a></div></li><li><div class="menu-item"><a href="how-to-use-the-tls-module.html" class="menuLink">Using the tls Module    </a></div></li></ul></li></ul><h3>Additional Reference</h3><ul class="menu"><li><div class="menu-item"><a href="globals-in-node-js.html" class="menuLink">A (Brief) List of Globals in Node.js</a></div></li><li><div class="menu-item"><a href="the-process-module.html" class="menuLink">Using the process Module    </a></div></li><li><div class="menu-item"><a href="the-console-module.html" class="menuLink">Using the console Module    </a></div></li><li><div class="menu-item"><span class="menuHeader">Javascript Conventions</span></div><ul class="menuTwo"><li><div class="menu-item"><a href="how-to-create-default-parameters-for-functions.html" class="menuLink">Creating Default Parameters for Functions</a></div></li><li><div class="menu-item"><a href="what-is-the-arguments-object.html" class="menuLink">The Arguments Object  </a></div></li><li><div class="menu-item"><a href="what-is-json.html" class="menuLink">About JSON </a></div></li><li><div class="menu-item"><a href="what-are-truthy-and-falsy-values.html" class="menuLink">Defining "Truthy" and "Falsy" values</a></div></li><li><div class="menu-item"><a href="using-ECMA5-in-nodejs.html" class="menuLink">Using ECMA5 in Node.js           </a></div></li></ul></li></ul></div></div></div><div class="span11"><span class="editInC9"><a href="#" title="Edit in Cloud9 IDE">[edit]</a></span><div id="content" class="dev_guide"><div class='title'>

<h1 class='pageTitle'>Reading POST Data</h1>
<span class="cite">by Nico Reed</span>

</div>



<p>Reading the data from a POST request (i.e. a form submission) can be a little bit of a pitfall in Node.js, so we&apos;re going to go through an example of how to do it properly.  

</p>
<p>The first step is to listen for incoming data. The trick is to wait for the data to finish, so that you can process all the form data without losing anything. 

</p>
<p>Here is a quick script that shows you how to do exactly that:

</p>
<script src='http://snippets.c9.io/github.com/c9/nodemanual.org-examples/nodejs_dev_guide/read_post_data/reading.post.data.js?linestart=0&lineend=0&showlines=false' defer='defer'></script>


<p>The variable <code>postHTML</code> is a static string containing the HTML for two input boxes and a submit box . This HTML is provided so that you can <code>POST</code> example data. This is <strong>not</strong> the right way to serve static HTML; to do that, see <a href="how-to-serve-static-files.html">How to Serve Static Files</a> for a more proper example.

</p>
<p>With the HTML out of the way, we <a href="HTTP-servers.html">create a server</a> to listen for requests. It is important to note, when listening for POST data, that the <code>req</code> object is also an <a href="what-are-event-emitters.html">Event Emitter</a>.  <code>req</code>, therefore, will emit a <code>data</code> event whenever a chunk of incoming data is received; when there is no more incoming data, the <code>end</code> event is emitted. In our case, we listen for <code>data</code> events. Once all the data is recieved, we log the data to the console and send the response. 

</p>
<p>Something important to note is that the event listeners are being added immediately after the request object is received. If you don&apos;t immediately set them, then there is a possibility of missing some of the events. If, for example, an event listener was attached from inside a callback, then the <code>data</code> and <code>end</code> events might be fired in the meantime with no listeners attached!

</p>
<p>You can save this script to <code>server.js</code> and run it with <code>node server.js</code>. Once you run it you will notice that occassionally you will see lines with no data:  <code>POSTed: </code>. This happens because regular <code>GET</code> requests go through the same codepath. In a more real-world application, it would be proper practice to check the type of request and handle the different request types differently.</p></div><div id="disqus_thread"></div></div></div></div><footer id="footer"><div class="container"><div class="footer-text">Thanks to these content providers | &#169; 2012:</div><div class="sponsors"><a href="http://c9.io/" title="cloud9 ide" target="_blank" class="c9-logo sponsor"></a><a href="http://www.joyent.com/" title="joyent" target="_blank" class="joyent-logo sponsor"></a><a href="http://www.mozilla.org/" title="mozilla" target="_blank" class="mozilla-logo sponsor"></a><a href="http://nodejitsu.com/" title="nodejitsu" target="_blank" class="nodejitsu-logo sponsor"></a></div></div></footer></div><!-- scripts concatenated and minified via ant build script--><script defer src="../resources/javascripts/plugins.js"></script>
<script defer src="../resources/javascripts/prettify.js"></script>
<script defer src="../resources/javascripts/prettify-extension.js"></script>
<script defer src="../resources/javascripts/script.js"></script>
<script defer src="../resources/javascripts/disqus-ext.js"></script>
<!-- end scripts--><!--[if lt IE 7]><script src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.3/CFInstall.min.js"></script><script>window.attachEvent('onload',function(){CFInstall.check({mode:'overlay'})})

</script><![endif]--></body></html>
