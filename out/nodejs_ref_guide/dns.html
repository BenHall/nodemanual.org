<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Node.js Reference Guide</title>
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="../css/bootstrap.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/sh.css" type="text/css" />
    <style type="text/css">
      body {
        padding-top: 60px;
      }
    </style>
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
  <script src="../js/toc.js"></script>
    <script type="text/javascript">
    $(document).ready(function() {
        //$("#toc").accordion({ event: 'mouseover' }, { autoHeight: false });
    });
    </script>
    <link href="../css/style_override.css" rel="stylesheet">
  </head>

  <body>
    <!--
        <div class="topbar">
          <div class="topbar-inner">
            <div class="container-fluid">
              <a class="brand" href="#">Project name</a>
              <ul class="nav">
                <li class="active"><a href="#">Home</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#contact">Contact</a></li>
              </ul>
              <p class="pull-right">Logged in as <a href="#">username</a></p>
            </div>
          </div>
        </div>
    -->

    <div class="container-fluid">
      <div class="sidebar">
        <div id="toc" class="well">
        <h5>Node.js Reference Guide</h5>
<div>
<ul>
<li><a class="upper" href="globals.html">Global Objects</a></li>
<li><a class="upper" href="stdio.html">Printing to Console</a></li>
<li><a class="upper" href="timers.html">Timers</a></li>
<li><a class="upper" href="modules.html">Modules</a></li>
<li><a class="upper" href="addons.html">Addons</a></li>
<li><a class="upper" href="process.html">process</a></li>
<li><a class="upper" href="util.html">util</a></li>
<li><a class="upper" href="events.html">Events</a></li>
<li><a class="upper" href="buffers.html">Buffers</a></li>
<li><a class="upper" href="streams.html">Streams</a></li>
<li><a class="upper" href="crypto.html">Cryptography and OpenSSL</a></li>
<li><a class="upper" href="tls.html">Implementing TLS & SSL</a></li>
<li><a class="upper" href="fs.html">Working with the File System</a></li>
<li><a class="upper" href="net.html">net</a></li>
<li><a class="upper" href="dgram.html">UDP and Datagram Sockets</a></li>
<li><a class="upper" href="dns.html">DNS</a></li>
<li><a class="upper" href="http.html">HTTP</a></li>
<li><a class="upper" href="https.html">HTTPS</a></li>
<li><a class="upper" href="url.html">URL</a></li>
<li><a class="upper" href="querystring.html">Query String</a></li>
<li><a class="upper" href="readline.html">Readline</a></li>
<li><a class="upper" href="repl.html">REPL</a></li>
<li><a class="upper" href="vm.html">Executing JavaScript</a></li>
<li><a class="upper" href="child_processes.html">Child Processes</a></li>
<li><a class="upper" href="assert.html">Assert</a></li>
<li><a class="upper" href="tty.html">TTY</a></li>
<li><a class="upper" href="zlib.html">Zipping with zlib</a></li>
<li><a class="upper" href="os.html">Accessing the OS</a></li>
<li><a class="upper" href="debugger.html">Debugging Node.js</a></li>
<li><a class="upper" href="cluster.html">Clusters</a></li>
<li><a class="upper" href="appendix_1.html">A1: Third Party Modules</a></li>
</ul></div>
</div>
</div>
<div class="content"><p><div class="hero-unit"></p>

<p><a class="hiddenLink" id="dns"></a></p>

<h2>DNS</h2>

<p>Whenever a user does <code>net.connect(80, 'google.com')</code> or <code>http.get({ host: 'google.com' })</code> the <code>dns.lookup()</code> method is used.  All methods in the dns module use C-Ares&mdash;except for <code>dns.lookup</code> which uses <code>getaddrinfo(3)</code> in a thread pool. C-Ares is much faster than <code>getaddrinfo</code>, but the system resolver is more constant with how other programs operate. Users who need to do a large number of look ups quickly should use the methods that go through C-Ares.</p>

<p>To access this module, include <code>require('dns')</code> in your code.</p>

<p>Here is an example which resolves <code>'www.google.com'</code> then reverse resolves the IP addresses that are returned:</p>

<pre><code>var dns = require('dns');

dns.resolve4('www.google.com', function (err, addresses) {
  if (err) throw err;

  console.log('addresses: ' + JSON.stringify(addresses));

  addresses.forEach(function (a) {
    dns.reverse(a, function (err, domains) {
      if (err) {
        console.log('reverse for ' + a + ' failed: ' +
          err.message);
      } else {
        console.log('reverse for ' + a + ': ' +
          JSON.stringify(domains));
      }
    });
  });
});
</code></pre>

<p><h4 class="methodHeader"> <code>dns.lookup(domain, family=null, callback(err, address, family))</code></h4><div class="methodParam"><h5>Parameters</h5><ul><li><code>domain</code>: The domain to resolve<li> <code>family</code>: Indicates whether to use IPv4 (<code>4</code>) or IPv6 (<code>6</code>)</li><li> <code>callback(err</li><li> address</li><li> family)</code>: The function to execute once the method completes; <code>err</code> is the error object; <code>address</code> is a string representation of an IPv4 or IPv6 address; <code>family</code> is either the integer <code>4</code> or <code>6</code></li><li> and donates the address family (not necessarily the value initially passed to <code>lookup</code>)</li></ul></p>

<p>Resolves a domain (e.g. <code>'google.com'</code>) into the first found A (IPv4) or<br />AAAA (IPv6) record.</p>

<p><h4 class="methodHeader"> <code>dns.resolve(domain, rrtype='A', callback(err, addresses))</code></h4><div class="methodParam"><h5>Parameters</h5><ul><li><code>domain</code>: The domain to resolve<li> <code>rrtype</code>: The record type to use</li><li> <code>callback(err</li><li> addresses)</code>: The function to execute once the method completes; <code>err</code> is the <code>Error</code> object; <code>addresses</code> is determined by the record type</li><li> and described in the each corresponding lookup method below</li></ul></p>

<p>Resolves a domain (e.g. <code>'google.com'</code>) into an array of the record types<br />specified by <code>rrtype</code>. Valid rrtypes are:</p>

<ul>
<li><code>A</code> (IPV4 addresses)</li>
<li><code>AAAA</code> (IPV6 addresses)</li>
<li><code>MX</code> (mail exchange records)</li>
<li><code>TXT</code> (text records)</li>
<li><code>SRV</code> (SRV records)</li>
<li><code>PTR</code> (used for reverse IP lookups)</li>
<li><code>NS</code> (name server records)</li>
<li><code>CNAME</code> (canonical name records)</li>
</ul>

<p><h4 class="methodHeader"> <code>dns.resolve4(domain, callback(err, addresses))</code></h4><div class="methodParam"><h5>Parameters</h5><ul><li><code>domain</code>: The domain to resolve<li> <code>callback(err</li><li> addresses)</code>: The function to execute once the method completes; <code>err</code> is the <code>Error</code> object; <code>addresses</code> is an array of IPv4 addresses (<em>e.g.</em> <code>['74.125.79.104'</li><li> '74.125.79.105'</li><li> '74.125.79.106']</code>)</li></ul></p>

<p>The same as <code>dns.resolve()</code>, but only for IPv4 queries (<code>A</code> records).</p>

<p><h4 class="methodHeader"> <code>dns.resolve6(domain, callback(err, addresses))</code></h4><div class="methodParam"><h5>Parameters</h5><ul><li><code>domain</code>: The domain to resolve<li> <code>callback(err</li><li> addresses)</code>: The function to execute once the method completes; <code>err</code> is the <code>Error</code> object; <code>addresses</code> is an array of IPv6</li></ul></p>

<p>The same as <code>dns.resolve4()</code> except for IPv6 queries (an <code>AAAA</code> query).</p>

<p><h4 class="methodHeader"> <code>dns.resolveMx(domain, callback(err, addresses))</code></h4><div class="methodParam"><h5>Parameters</h5><ul><li><code>domain</code>: The domain to resolve<li> <code>callback(err</li><li> addresses)</code>: The function to execute once the method completes; <code>err</code> is the <code>Error</code> object; <code>addresses</code> is an array of MX records</li><li> each with a priority and an exchange attribute (<em>e.g.</em> <code>[{'priority': 10</li><li> 'exchange': 'mx.example.com'}</li><li>...]</code>)</li></ul></p>

<p>The same as <code>dns.resolve()</code>, but only for mail exchange queries (<code>MX</code> records).</p>

<p><h4 class="methodHeader"> <code>dns.resolveTxt(domain, callback(err, addresses))</code></h4><div class="methodParam"><h5>Parameters</h5><ul><li><code>domain</code>: The domain to resolve<li> <code>callback(err</li><li> addresses)</code>: The function to execute once the method completes; <code>err</code> is the <code>Error</code> object; <code>addresses</code> is an array of the text records available for <code>domain</code> (<em>e.g.</em> <code>['v=spf1 ip4:0.0.0.0 ~all']</code>)</li></ul></p>

<p>The same as <code>dns.resolve()</code>, but only for text queries (<code>TXT</code> records).</p>

<h3>dns.resolveSrv(domain, callback(err, addresses))`</h3>

<p>@param <code>domain</code>: The domain to resolve, <code>callback(err, addresses)</code>: The function to execute once the method completes; <code>err</code> is the <code>Error</code> object; <code>addresses</code> is an array of the SRV records available for <code>domain</code>. Properties of SRV records are priority, weight, port, and name (<em>e.g.</em> <code>[{'priority': 10, {'weight': 5, 'port': 21223, 'name': 'service.example.com'}, ...]</code>)</p>

<p>The same as <code>dns.resolve()</code>, but only for service records (<code>SRV</code> records).</p>

<p><h4 class="methodHeader"> <code>dns.reverse(ip, callback(err, domains))</code></h4><div class="methodParam"><h5>Parameters</h5><ul><li><code>ip</code>: The IP address to reverse<li> <code>callback(err</li><li> domains)</code>: The function to execute once the method completes; <code>err</code> is the <code>Error</code> object; <code>domains</code> is an array of possible domain names</li></ul></p>

<p>Reverse resolves an IP address to an array of domain names.</p>

<p><h4 class="methodHeader"> <code>dns.resolveNs(domain, ccallback(err, domains))</code></h4><div class="methodParam"><h5>Parameters</h5><ul><li><code>domain</code>: The domain to reverse<li> <code>callback(err</li><li> domains)</code>: The function to execute once the method completes; <code>err</code> is the <code>Error</code> object; <code>domains</code> is an array of the name server records available for <code>domain</code> (<em>e.g</em> <code>['ns1.example.com'</li><li> 'ns2.example.com']</code>)</li></ul></p>

<p>The same as <code>dns.resolve()</code>, but only for name server records (<code>NS</code> records).</p>

<p><h4 class="methodHeader"> <code>dns.resolveCname(domain, callback(err, domains))</code></h4><div class="methodParam"><h5>Parameters</h5><ul><li><code>domain</code>: The domain to reverse<li> <code>callback(err</li><li> domains)</code>: The function to execute once the method completes; <code>err</code> is the <code>Error</code> object; <code>domains</code> is an array of the canonical name records available for <code>domain</code> (e.g.</li><li> <code>['bar.example.com']</code>)</li></ul></p>

<p>The same as <code>dns.resolve()</code>, but only for canonical name records (<code>CNAME</code><br />records).</p>

<p>Each DNS query can return one of the following error codes:</p>

<ul>
<li><code>dns.TEMPFAIL</code>: timeout, SERVFAIL or similar.</li>
<li><code>dns.PROTOCOL</code>: got garbled reply.</li>
<li><code>dns.NXDOMAIN</code>: domain does not exists.</li>
<li><code>dns.NODATA</code>: domain exists but no data of reqd type.</li>
<li><code>dns.NOMEM</code>: out of memory while processing.</li>
<li><code>dns.BADQUERY</code>: the query is malformed.
</div></li>
</ul></div>
</div>
<footer>
    <p>&nbsp;</p>
</footer>
        
<script type="text/javascript" src="../js/sh_main.js"></script>
<script type="text/javascript" src="../js/sh_javascript.min.js"></script>
</div>
    </div>

  </body>
</html>