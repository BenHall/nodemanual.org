<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Node.js Reference Guide</title>
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="../css/bootstrap.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/sh.css" type="text/css" />
    <style type="text/css">
      body {
        padding-top: 60px;
      }
    </style>
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
  <script src="../js/toc.js"></script>
    <script type="text/javascript">
    $(document).ready(function() {
        //$("#toc").accordion({ event: 'mouseover' }, { autoHeight: false });
    });
    </script>
    <link href="../css/style_override.css" rel="stylesheet">
  </head>

  <body>
    <!--
        <div class="topbar">
          <div class="topbar-inner">
            <div class="container-fluid">
              <a class="brand" href="#">Project name</a>
              <ul class="nav">
                <li class="active"><a href="#">Home</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#contact">Contact</a></li>
              </ul>
              <p class="pull-right">Logged in as <a href="#">username</a></p>
            </div>
          </div>
        </div>
    -->

    <div class="container-fluid">
      <div class="sidebar">
        <div id="toc" class="well">
        <h5>Node.js Reference Guide</h5>
<div>
<ul>
<li><a class="upper" href="globals.html">Global Objects</a></li>
<li><a class="upper" href="stdio.html">Printing to Console</a></li>
<li><a class="upper" href="timers.html">Timers</a></li>
<li><a class="upper" href="modules.html">Modules</a></li>
<li><a class="upper" href="addons.html">Addons</a></li>
<li><a class="upper" href="process.html">process</a></li>
<li><a class="upper" href="util.html">util</a></li>
<li><a class="upper" href="events.html">Events</a></li>
<li><a class="upper" href="buffers.html">Buffers</a></li>
<li><a class="upper" href="streams.html">Streams</a></li>
<li><a class="upper" href="crypto.html">Cryptography and OpenSSL</a></li>
<li><a class="upper" href="tls.html">Implementing TLS & SSL</a></li>
<li><a class="upper" href="fs.html">File System</a></li>
<li><a class="upper" href="net.html">net</a></li>
<li><a class="upper" href="dgram.html">UDP / Datagram Sockets</a></li>
<li><a class="upper" href="dns.html">DNS</a></li>
<li><a class="upper" href="http.html">HTTP</a></li>
<li><a class="upper" href="https.html">HTTPS</a></li>
<li><a class="upper" href="url.html">URL</a></li>
<li><a class="upper" href="querystring.html">Query String</a></li>
<li><a class="upper" href="readline.html">Readline</a></li>
<li><a class="upper" href="repl.html">REPL</a></li>
<li><a class="upper" href="vm.html">Executing JavaScript</a></li>
<li><a class="upper" href="child_processes.html">Child Processes</a></li>
<li><a class="upper" href="assert.html">Assert</a></li>
<li><a class="upper" href="tty.html">TTY</a></li>
<li><a class="upper" href="zlib.html">Zlib</a></li>
<li><a class="upper" href="os.html">os Module</a></li>
<li><a class="upper" href="debugger.html">Debugger</a></li>
<li><a class="upper" href="cluster.html">Cluster</a></li>
<li><a class="upper" href="appendix_1.html">Appendix 1 - Third Party Modules</a></li>
</ul></div>
</div>
</div>
<div class="content"><p><div class="hero-unit"></p>

<p><a class="hiddenLink" id="dns"></a></p>

<h2>DNS</h2>

<p>Use <code>require('dns')</code> to access this module. All methods in the dns module<br />use C-Ares except for <code>dns.lookup</code> which uses <code>getaddrinfo(3)</code> in a thread<br />pool. C-Ares is much faster than <code>getaddrinfo</code> but the system resolver is<br />more constant with how other programs operate. When a user does<br /><code>net.connect(80, 'google.com')</code> or <code>http.get({ host: 'google.com' })</code> the<br /><code>dns.lookup</code> method is used. Users who need to do a large number of look ups<br />quickly should use the methods that go through C-Ares.</p>

<p>Here is an example which resolves <code>'www.google.com'</code> then reverse<br />resolves the IP addresses which are returned.</p>

<pre><code>var dns = require('dns');

dns.resolve4('www.google.com', function (err, addresses) {
  if (err) throw err;

  console.log('addresses: ' + JSON.stringify(addresses));

  addresses.forEach(function (a) {
    dns.reverse(a, function (err, domains) {
      if (err) {
        console.log('reverse for ' + a + ' failed: ' +
          err.message);
      } else {
        console.log('reverse for ' + a + ': ' +
          JSON.stringify(domains));
      }
    });
  });
});
</code></pre>

<h3>dns.lookup(domain, family=null, callback)</h3>

<p>Resolves a domain (e.g. <code>'google.com'</code>) into the first found A (IPv4) or<br />AAAA (IPv6) record.</p>

<p>The callback has arguments <code>(err, address, family)</code>.  The <code>address</code> argument<br />is a string representation of a IP v4 or v6 address. The <code>family</code> argument<br />is either the integer 4 or 6 and denotes the family of <code>address</code> (not<br />necessarily the value initially passed to <code>lookup</code>).</p>

<h3>dns.resolve(domain, rrtype='A', callback)</h3>

<p>Resolves a domain (e.g. <code>'google.com'</code>) into an array of the record types<br />specified by rrtype. Valid rrtypes are <code>A</code> (IPV4 addresses), <code>AAAA</code> (IPV6<br />addresses), <code>MX</code> (mail exchange records), <code>TXT</code> (text records), <code>SRV</code> (SRV<br />records), <code>PTR</code> (used for reverse IP lookups), <code>NS</code> (name server records)<br />and <code>CNAME</code> (canonical name records).</p>

<p>The callback has arguments <code>(err, addresses)</code>.  The type of each item<br />in <code>addresses</code> is determined by the record type, and described in the<br />documentation for the corresponding lookup methods below.</p>

<p>On error, <code>err</code> would be an instanceof <code>Error</code> object, where <code>err.errno</code> is<br />one of the error codes listed below and <code>err.message</code> is a string describing<br />the error in English.</p>

<h3>dns.resolve4(domain, callback)</h3>

<p>The same as <code>dns.resolve()</code>, but only for IPv4 queries (<code>A</code> records).<br /><code>addresses</code> is an array of IPv4 addresses (e.g.<br /><code>['74.125.79.104', '74.125.79.105', '74.125.79.106']</code>).</p>

<h3>dns.resolve6(domain, callback)</h3>

<p>The same as <code>dns.resolve4()</code> except for IPv6 queries (an <code>AAAA</code> query).</p>

<h3>dns.resolveMx(domain, callback)</h3>

<p>The same as <code>dns.resolve()</code>, but only for mail exchange queries (<code>MX</code> records).</p>

<p><code>addresses</code> is an array of MX records, each with a priority and an exchange<br />attribute (e.g. <code>[{'priority': 10, 'exchange': 'mx.example.com'},...]</code>).</p>

<h3>dns.resolveTxt(domain, callback)</h3>

<p>The same as <code>dns.resolve()</code>, but only for text queries (<code>TXT</code> records).<br /><code>addresses</code> is an array of the text records available for <code>domain</code> (e.g.,<br /><code>['v=spf1 ip4:0.0.0.0 ~all']</code>).</p>

<h3>dns.resolveSrv(domain, callback)</h3>

<p>The same as <code>dns.resolve()</code>, but only for service records (<code>SRV</code> records).<br /><code>addresses</code> is an array of the SRV records available for <code>domain</code>. Properties<br />of SRV records are priority, weight, port, and name (e.g.,<br /><code>[{'priority': 10, {'weight': 5, 'port': 21223, 'name': 'service.example.com'}, ...]</code>).</p>

<h3>dns.reverse(ip, callback)</h3>

<p>Reverse resolves an ip address to an array of domain names.</p>

<p>The callback has arguments <code>(err, domains)</code>.</p>

<h3>dns.resolveNs(domain, callback)</h3>

<p>The same as <code>dns.resolve()</code>, but only for name server records (<code>NS</code> records).<br /><code>addresses</code> is an array of the name server records available for <code>domain</code><br />(e.g., <code>['ns1.example.com', 'ns2.example.com']</code>).</p>

<h3>dns.resolveCname(domain, callback)</h3>

<p>The same as <code>dns.resolve()</code>, but only for canonical name records (<code>CNAME</code><br />records). <code>addresses</code> is an array of the canonical name records available for<br /><code>domain</code> (e.g., <code>['bar.example.com']</code>).</p>

<p>If there an an error, <code>err</code> will be non-null and an instanceof the Error<br />object.</p>

<p>Each DNS query can return an error code.</p>

<ul>
<li><code>dns.TEMPFAIL</code>: timeout, SERVFAIL or similar.</li>
<li><code>dns.PROTOCOL</code>: got garbled reply.</li>
<li><code>dns.NXDOMAIN</code>: domain does not exists.</li>
<li><code>dns.NODATA</code>: domain exists but no data of reqd type.</li>
<li><code>dns.NOMEM</code>: out of memory while processing.</li>
<li><code>dns.BADQUERY</code>: the query is malformed.
</div></li>
</ul></div>
</div>
<footer>
    <p>&nbsp;</p>
</footer>
        
<script type="text/javascript" src="../js/sh_main.js"></script>
<script type="text/javascript" src="../js/sh_javascript.min.js"></script>
</div>
    </div>

  </body>
</html>