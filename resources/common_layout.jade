mixin doctype
  !!! 5
  <!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
  <!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
  <!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
  <!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->

mixin head(additionalCSS)
  meta(charset="utf-8")
  //- N.B. http://blog.yjl.im/2011/01/bad-value-x-ua-compatible-for-attribute.html
  meta(http-equiv="X-UA-Compatible", content="IE=edge,chrome=1")

  title Node.js Manual | #{title}

  meta(name="generator", content="c9-doc-build")
  meta(name="description", content="A collection of Node.js tutorials")
  meta(name="author", content="Garen J. Torikian")

  meta(name="viewport", content="width=device-width,initial-scale=1")

  link(rel="stylesheet", href="../resources/csses/bootstrap.css")
  link(rel="stylesheet", href="../resources/csses/prettify.css")
  link(rel="stylesheet", href="../resources/csses/refguide_overrides.css")

  if additionalCSS
    link(rel="stylesheet", href="#{additionalCSS}")

  script(src="../resources/javascripts/jquery.js")
  script(src="../resources/javascripts/clicker.js")
  script(src="../resources/javascripts/jquery.collapse.js")
  script(src="../resources/javascripts/jquery.cookie.js")
  script(src="../resources/javascripts/bootstrap-dropdown.js")

mixin topBar
  div.topbar
      div.fill
        div.container#topSection
          ul.nav
              li(class="dropdown", data-dropdown="dropdown")
                  a(class="dropdown-toggle brand", href="/")
                    //div(class="arrow-down")
                  ul(class="dropdown-menu")
                      li
                          a(href="http://www.nodebits.org/") Nodebits
                      li
                          a(href="http://www.howtonode.org/") HowToNode
                      li
                          a(href="http://training.c9.io/") Node.js Training
          ul.nav
            li#node_js_ref
              a(href='#{dirPrefix}nodejs_ref_guide/index.html') Node.js Reference
            li#nodejs_dev_guide
              a(href='#{dirPrefix}nodejs_dev_guide/index.html') Node.js Manual
            li#js_doc
              a(href='#{dirPrefix}js_doc/index.html') Javascript Reference
            li(class="dropdown versions")
              a(class="dropdown-toggle versionToggler", href="/") Versions
              ul(class="dropdown-menu")
                li 
                  a(href="http:www.nodemanual.org/", class="version") Latest (0.6.8)
                li
                  a(href="http:www.nodemanual.org/0.6.7", class="version") 0.6.7
          form(id='searchbox', action='', class='pull-right')  
            input(class='span3', name='query', type='text', placeholder="Search Documentation", title="Search across all the documentation types") 

mixin header
  header.jumbotron.masthead#overview
    //- a(class="c9-sponsor", href="http://c9.io/", title="cloud9 ide", target="_blank")
    div.inner
      div.container
        if nodejsRef == 'true'
          h1 Node.js Reference
        else if jsDoc == 'true'
          h1 Javascript Reference
        else
          h1 Node.js Manual
        p.lead

mixin footer
  footer#footer
        .container
          .footer-text Thanks to these content providers | &#169; 2012:
          .sponsors
              a(class="c9-logo sponsor", href="http://c9.io/", title="cloud9 ide", target="_blank")
              a(class="joyent-logo sponsor", href="http://www.joyent.com/", title="joyent", target="_blank")
              a(class="mozilla-logo sponsor", href="http://www.mozilla.org/", title="mozilla", target="_blank")
              a(class="debuggable-logo sponsor", href="http://www.debuggable.com/", title="debuggable", target="_blank")


mixin endingScripts
  // scripts concatenated and minified via ant build script
  <script defer src="#{dirPrefix}resources/javascripts/plugins.js"></script>
  <script defer src="#{dirPrefix}resources/javascripts/prettify.js"></script>
  <script defer src="#{dirPrefix}resources/javascripts/prettify-extension.js"></script>
  <script defer src="#{dirPrefix}resources/javascripts/script.js"></script>
  <script defer src="#{dirPrefix}resources/javascripts/disqus-ext.js"></script>
  //-<script defer src="tree.js"></script>
  // end scripts

  //if lt IE 7
    script(src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.3/CFInstall.min.js")
    script
      window.attachEvent('onload',function(){CFInstall.check({mode:'overlay'})})